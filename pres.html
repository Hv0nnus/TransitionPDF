<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Présentation</title>
        <style>
            .cont {
                width: 1280px;
                height: 720px;
                position: relative;
            }
            .cont * {
                position: absolute;
                left: 0; top: 0;
                max-width: 100%;
                height: 100%;
            }
            .cont>* {
                visibility: hidden;
            }
            .cont>.current {
                visibility: visible;
            }
            .cont>div {
                width: 100%;
            }
            .cont>div>video:not(.show) {
                display: none;
            }
        </style>
    </head>
    <body>

        <!--
SOME COMMANDS FOR GENERATING THE VIDEOS:
pip install webm
webm -i pdftoimage/gif_generated/0-1.gif vids/0-1.mp4
webm -i pdftoimage/gif_generated/1-2.gif vids/1-2.mp4
ffmpeg -i vids/1-2.mp4 -vf reverse vids/2-1.mp4
-->

        <div class="controls">
            <button onclick="step(-1)">«</button>
            <button onclick="step( 1)">»</button>
        </div>
        <div class="cont">
            <!-- METTRE CI-DESSOUS LES SLIDES -->

	    <!-- <iframe src="./pdftoimage/pdf_generated/0.pdf" height="200" width="600"></iframe> -->
            <!-- <video src="./pdftoimage/video_generated/1-2.mp4"></video>  just a video transition, play only forward -->
            <img src="./pdftoimage/png_generated/0_pres-1.png"/>
	    <div>
                <video src="./pdftoimage/video_generated/0-1.mp4"></video>
                <video src="./pdftoimage/video_generated/1-0.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/1_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/1-2.mp4"></video>
                <video src="./pdftoimage/video_generated/2-1.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/2_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/2-3.mp4"></video>
                <video src="./pdftoimage/video_generated/3-2.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/3_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/3-4.mp4"></video>
                <video src="./pdftoimage/video_generated/4-3.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/4_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/4-5.mp4"></video>
                <video src="./pdftoimage/video_generated/5-4.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/5_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/5-6.mp4"></video>
                <video src="./pdftoimage/video_generated/6-5.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/6_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/6-7.mp4"></video>
                <video src="./pdftoimage/video_generated/7-6.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/7_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/7-8.mp4"></video>
                <video src="./pdftoimage/video_generated/8-7.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/8_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/8-9.mp4"></video>
                <video src="./pdftoimage/video_generated/9-8.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/9_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/9-10.mp4"></video>
                <video src="./pdftoimage/video_generated/10-9.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/10_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/10-11.mp4"></video>
                <video src="./pdftoimage/video_generated/11-10.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/11_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/11-12.mp4"></video>
                <video src="./pdftoimage/video_generated/12-11.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/12_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/12-13.mp4"></video>
                <video src="./pdftoimage/video_generated/13-12.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/13_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/13-14.mp4"></video>
                <video src="./pdftoimage/video_generated/14-13.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/14_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/14-15.mp4"></video>
                <video src="./pdftoimage/video_generated/15-14.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/15_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/15-16.mp4"></video>
                <video src="./pdftoimage/video_generated/16-15.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/16_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/16-17.mp4"></video>
                <video src="./pdftoimage/video_generated/17-16.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/17_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/17-18.mp4"></video>
                <video src="./pdftoimage/video_generated/18-17.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/18_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/18-19.mp4"></video>
                <video src="./pdftoimage/video_generated/19-18.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/19_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/19-20.mp4"></video>
                <video src="./pdftoimage/video_generated/20-19.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/20_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/20-21.mp4"></video>
                <video src="./pdftoimage/video_generated/21-20.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/21_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/21-22.mp4"></video>
                <video src="./pdftoimage/video_generated/22-21.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/22_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/22-23.mp4"></video>
                <video src="./pdftoimage/video_generated/23-22.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/23_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/23-24.mp4"></video>
                <video src="./pdftoimage/video_generated/24-23.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/24_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/24-25.mp4"></video>
                <video src="./pdftoimage/video_generated/25-24.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/25_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/25-26.mp4"></video>
                <video src="./pdftoimage/video_generated/26-25.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/26_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/26-27.mp4"></video>
                <video src="./pdftoimage/video_generated/27-26.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/27_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/27-28.mp4"></video>
                <video src="./pdftoimage/video_generated/28-27.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/28_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/28-29.mp4"></video>
                <video src="./pdftoimage/video_generated/29-28.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/29_pres-1.png"/>
            <div>
                <video src="./pdftoimage/video_generated/29-30.mp4"></video>
                <video src="./pdftoimage/video_generated/30-29.mp4"></video>
            </div>
            <img src="./pdftoimage/png_generated/30_pres-1.png"/>


1

​
1




            
        </div>
        
        <script>
            nothing = () => {}
            current = 0
            onstep = nothing
            
            function step(s) {
                {
                    os = onstep
                    onstep = nothing
                    os()
                    current = Math.max(0, current+s)
                    console.log('CURRENT', current)
                }

                let dir = s<0 ? 'backward' : 'foward'
                let slides = Array.from(document.querySelectorAll('.cont>*'))
                let c = current
                let im = slides[c]

                let playVideoThenStep = (im, thenStep) => {
                    im.playbackRate = 4 // speedup of the transition
                    if (dir == 'backward') {
                        im.playbackRate = 8
                    }
                    im.onended = () => {
                        step(thenStep)
                    }
                    im.onseeked = () => {
                        slides.forEach((e,i) => e.classList.toggle('current', i==c))
                        im.play()
                    }
                    im.currentTime = 0
                    onstep = () => {
                        im.onended = im.onseeked = undefined
                        im.pause()
                    }
                }

                // different slide types
                if (im.tagName == 'IMG') {
                    if (im && im.src) {
                        if (im.src.endsWith('.gif')) {
                            let url = im.src
                            im.src = ''
                            im.onerror = im.onload = () => {
                                im.onerror = im.onload = undefined
                                slides.forEach((e,i) => e.classList.toggle('current', i==c))
                            }
                            setTimeout(() => {im.src = url}, 0)
                        } else {
                            slides.forEach((e,i) => e.classList.toggle('current', i==c))
                        }
                    }
                } else if (im.tagName ==  'DIV') {
                    let target = im.children[dir == 'backward' ? 1 : 0]
                    let nextStep = dir == 'backward' ? -1 : +1
                    console.log(im.tagName, target, nextStep, Array.from(im.children))
                    Array.from(im.children).forEach(e => e.classList.toggle('show', e==target))
                    playVideoThenStep(target, nextStep)
                } else if (im.tagName == 'VIDEO') {
                    if (dir == 'backward') {
                        step(-1)
                        return
                    }
                    playVideoThenStep(im, 1)
                }
            }
            step(0)

            window.addEventListener('keydown', ev => {
                let use = true
                if (ev.code == 'ArrowRight') {
                    step(1)
                } else if (ev.code == 'ArrowLeft') {
                    step(-1)
                } else {
                    use = false
                }
                if (use) {
                    ev.preventDefault()
                }
            })
        </script>
    </body>
</html>
